(function(){function F(d,a){function b(){this.constructor=d}for(var c in a)M.call(a,c)&&(d[c]=a[c]);b.prototype=a.prototype;d.prototype=new b;d.ua=a.prototype}var G,w,u,A,H,x,y,B,I,v,J,C,D,E,z,K,M={}.hasOwnProperty;J=function(d){var a,b,c,h,e;a=[0];h=b=0;for(e=d.length;h<e;h++)c=d[h],b+=c,a.push(b);return a};v=function(d,a,b){return d<a?a:d>b?b:d};I=function(d,a){var b,c,h,e;if(d[0]>a)return 0;b=0;for(c=d.length;b+2<c;)if(h=(b+c)/2|0,e=d[h],e<a)b=h;else if(e>a)c=h;else return h;return b};K=function(d,
a){var b,c;b=1;for(c=0;c+b<d.length;)d[c+b]-d[c]>a?c+=1:b+=1;return b};z=function(){var d,a,b,c,h;d=document.createElement("div");h=["transform","WebkitTransform","MozTransform","OTransform","MsTransform"];b=0;for(c=h.length;b<c;b++)if(a=h[b],void 0!==d.style[a])return a}();w=function(){function d(a){this.size=null!=a?a:100;this.data={};this.J=[]}d.prototype.has=function(a){return this.data.hasOwnProperty(a)};d.prototype.get=function(a){return this.data[a]};d.prototype.set=function(a,b){var c;c=this.J.indexOf(a);
0<=c&&this.J.splice(c,1);this.J.push(a);this.J.length>=this.size&&(c=this.J.shift(),delete this.data[c]);return this.data[a]=b};return d}();D=function(d){return d.touches&&d.touches.length?d.touches:[{pageX:d.pageX,pageY:d.pageY}]};y=function(){function d(){}d.prototype.P=function(){return!1};d.prototype.oa=function(){return!1};d.prototype.pa=function(){return!1};d.prototype.I=function(a,b,c){null==c&&(c=function(){});return c("getCell not implemented")};d.prototype.N=function(a,b){null==b&&(b=function(){});
return b("getColumnHeader not implemented")};d.prototype.O=function(a,b){null==b&&(b=function(){});return b("getRowHeader not implemented")};return d}();x=function(d){function a(){return a.ua.constructor.apply(this,arguments)}F(a,d);a.prototype.za=function(a,c){return a+","+c};a.prototype.Aa=function(a){return"col "+a};a.prototype.Ba=function(a){return"row "+a};a.prototype.P=function(){return!0};a.prototype.oa=function(){return!0};a.prototype.pa=function(){return!0};a.prototype.I=function(a,c,d){null==
d&&(d=function(){});return d(this.za(a,c))};a.prototype.N=function(a,c){null==c&&(c=function(){});return c(this.Aa(a))};a.prototype.O=function(a,c){null==c&&(c=function(){});return c(this.Ba(a))};return a}(y);u=function(d){function a(a){null==a&&(a=100);this.da=new w(a);this.ia=new w(a);this.sa=new w(a);this.ba={};this.Y={};this.ea={}}F(a,d);a.prototype.N=function(a){if(this.ia.has(void 0))return cb(this.ia.get(void 0)(a));if(null!=this.Y[void 0])return this.Y[void 0].push([a,cb]);this.Y[void 0]=
[[a,cb]]};a.prototype.O=function(a){if(this.sa.has(void 0))return cb(this.sa.get(void 0)(a));if(null!=this.ea[void 0])return this.ea[void 0].push([a,cb]);this.ea[void 0]=[[a,cb]]};a.prototype.P=function(){return this.da.has(void 0)};a.prototype.I=function(a,c,d){null==d&&(d=function(){});if(this.da.has(void 0))return d(this.da.get(void 0)(a,c));if(null!=this.ba[void 0])return this.ba[void 0].push([a,c,d]);this.ba[void 0]=[[a,c,d]]};return a}(y);A=function(){function d(){}d.prototype.X=function(a){var b,
c;c=a.cells;for(b in c);c=a.v;for(b in c);a=a.rows;c=[];for(b in a)c.push(void 0);return c};d.prototype.ma=function(a,b){return a.textContent=b};d.prototype.na=function(a,b){return a.textContent=b};d.prototype.ca=function(a,b){return a.textContent=b};d.prototype.xa=function(a){a.textContent="NA"};d.prototype.ya=function(a){a.textContent="NA"};d.prototype.la=function(a){return a.textContent="NA"};return d}();G=function(){function d(){this.W=[]}d.prototype.bind=function(a,b,c){this.W.push([a,b,c]);
return a.addEventListener(b,c)};d.prototype.La=function(){var a,b,c,d,e,f;f=this.W;d=0;for(e=f.length;d<e;d++)a=f[d],c=a[0],b=a[1],a=a[2],c.removeEventListener(b,a);this.W=[]};return d}();H=function(){function d(a,b,c,d,e,f,g,k,l){var n,m;this.a=a;this.b=b;this.f=c;this.D=d;this.C=e;this.Ca=null!=g?g:!0;this.Ma=null!=k?k:!0;this.ja=null!=l?l:!0;this.h=document.createElement("div");this.h.className+=" fattable-v-scrollbar";this.Ma||(this.h.style.visibility="hidden");this.g=document.createElement("div");
this.g.className+=" fattable-h-scrollbar";this.Ca||(this.g.style.visibility="hidden");this.a.appendChild(this.g);this.a.appendChild(this.h);a=document.createElement("div");a.style.height="1px";a.style.width=this.D+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.C+"px";this.g.appendChild(a);this.h.appendChild(b);this.ta=Math.max(this.g.offsetHeight,this.h.offsetWidth);this.h.style.bottom=this.ta+"px";this.g.style.right=this.ta+"px";this.scrollTop=this.scrollLeft=0;this.g.onscroll=
function(a){return function(){if(!a.F&&a.scrollLeft!==a.g.scrollLeft)return a.scrollLeft=a.g.scrollLeft,a.w(a.scrollLeft,a.scrollTop)}}(this);this.h.onscroll=function(a){return function(){if(!a.F&&a.scrollTop!==a.h.scrollTop)return a.scrollTop=a.h.scrollTop,a.w(a.scrollLeft,a.scrollTop)}}(this);this.ja&&(f.bind(this.a,"mousedown",function(a){return function(b){if(1===b.button)return a.F=!0,a.a.className="fattable-body-container fattable-moving",a.$=a.scrollLeft+b.clientX,a.aa=a.scrollTop+b.clientY}}(this)),
f.bind(this.a,"mouseup",function(a){return function(){a.F=!1;return a.a.className="fattable-body-container"}}(this)),f.bind(this.a,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c,d;if(a.F)return c=-b.clientX+a.$,d=-b.clientY+a.aa,a.B(c,d)},0)}}(this)),f.bind(this.a,"mouseout",function(a){return function(b){if(a.F&&(null==b.toElement||b.toElement.parentElement.parentElement!==a.a))return a.a.className="fattable-body-container",a.F=!1}}(this)),f.bind(this.b,"mousedown",
function(a){return function(b){if(1===b.button)return a.L=!0,a.b.className="fattable-header-container fattable-column-header-container fattable-moving",a.$=a.scrollLeft+b.clientX}}(this)),f.bind(this.f,"mousedown",function(a){return function(b){if(1===b.button)return a.R=!0,a.f.className="fattable-header-container fattable-row-header-container fattable-moving",a.aa=a.scrollTop+b.clientY}}(this)),f.bind(this.a,"mouseup",function(a){return function(b){var c;if(1===b.button)return a.L=!1,a.R=!1,a.b.className=
"fattable-header-container",b.stopPropagation(),c=function(a){a.stopPropagation();return this.removeEventListener("click",c,!0)},a.a.addEventListener("click",c,!0)}}(this)),f.bind(this.b,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c;if(a.L)return c=-b.clientX+a.$,a.B(c)},0)}}(this)),f.bind(this.b,"mouseout",function(a){return function(b){if(a.L){if(null==b.toElement||b.toElement.parentElement.parentElement!==a.b)a.b.className="fattable-header-container fattable-column-header-container";
return a.L=!1}}}(this)),f.bind(this.f,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c;if(a.R)return c=-b.clientY+a.aa,a.B(void 0,c)},0)}}(this)),f.bind(this.f,"mouseout",function(a){return function(b){if(a.R){if(null==b.toElement||b.toElement.parentElement.parentElement!==a.f)a.f.className="fattable-header-container fattable-row-header-container";return a.R=!1}}}(this)));this.Da=this.D>this.g.clientWidth?this.D-this.g.clientWidth:0;this.Ea=this.C>this.h.clientHeight?
this.C-this.h.clientHeight:0;m="DOMMouseScroll";void 0!==this.a.onwheel?m="wheel":void 0!==this.a.onmousewheel&&(m="mousewheel");n=function(){switch(m){case "wheel":return function(a){var b,c,d,f,h,e;switch(a.deltaMode){case a.Na:b=null!=(d=-50*a.deltaX)?d:0;c=null!=(f=-50*a.deltaY)?f:0;break;case a.Oa:b=null!=(h=-1*a.deltaX)?h:0,c=null!=(e=-1*a.deltaY)?e:0}return[b,c]};case "mousewheel":return function(a){var b,c,d;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(d=a.wheelDeltaY)?d:a.wheelDelta;return[b,a]};
case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.Pa?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();a=function(a){return function(b){var c;c=n(b);if(a.B(a.scrollLeft-c[0],a.scrollTop-c[1]))return b.preventDefault()}}(this);b=function(a){return function(b){var c;c=n(b);if(a.B(a.scrollLeft-c[0],a.scrollTop))return b.preventDefault()}}(this);c=function(a){return function(b){var c;c=n(b);if(a.B(a.scrollLeft,a.scrollTop-c[1]))return b.preventDefault()}}(this);f.bind(this.a,m,a);f.bind(this.b,
m,b);f.bind(this.f,m,c);this.U=new Scroller(this.B.bind(this),{});this.U.ab(this.scrollWidth,this.scrollHeight,this.D,this.C);c=function(a){return function(b){a.V=!0;return a.U.Ya(D(b),b.timeStamp)}}(this);b=function(a){return function(b){a.U.Xa(D(b),b.timeStamp,b.scale);return a.V=!0}}(this);a=function(a){return function(b){if(a.V)return a.U.Wa(b.timeStamp),a.V=!1}}(this);"ontouchstart"in window?(f.bind(this.a,"touchstart",c),f.bind(this.a,"touchmove",b),f.bind(this.a,"touchend",a),f.bind(this.a,
"touchcancel",a)):window.navigator.wa?(f.bind(this.a,"pointerdown",c),f.bind(this.a,"pointermove",b),f.bind(this.a,"pointerup",a),f.bind(this.a,"pointercancel",a)):window.navigator.msPointerEnabled&&(f.bind(this.a,"MSPointerDown",c),f.bind(this.a,"MSPointerMove",b),f.bind(this.a,"MSPointerUp",a),f.bind(this.a,"MSPointerCancel",a))}d.prototype.w=function(){};d.prototype.B=function(a,b){var c;c=!1;null!=a?(a=v(a,0,this.Da),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=
v(b,0,this.Ea),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.g.scrollLeft=a;this.h.scrollTop=b;this.w(a,b);return c};return d}();B=function(){function d(a){var b;b=a.j;if(null==b)throw"container not specified.";if("string"===typeof b)this.j=document.querySelector(b);else if("object"===typeof b)this.j=b;else throw"Container must be a string or a dom element.";this.i(a,"painter",new A);this.i(a,"autoSetup",!0);this.i(a,"model");this.i(a,"nbRows");this.i(a,"rowHeight");this.i(a,
"columnWidths");this.i(a,"nbColsOverdraw",2);this.i(a,"nbRowsOverdraw",2);this.i(a,"columnHeaderHeight");this.i(a,"rowHeaderWidth");this.i(a,"scrollBarVisible",!0);this.i(a,"horizontalScrollbar",this.Ia);this.i(a,"verticalScrollbar",this.Ia);this.i(a,"enableDragMove",!0);this.Ha=this.Z.length;-1===(" "+this.j.className+" ").search(/\sfattable\s/)&&(this.j.className+=" fattable");this.C=this.T*this.qa;this.H=J(this.Z);this.D=this.H[this.H.length-1];this.rows={};this.v={};this.cells={};this.ka=new G;
this.ha();this.Va&&this.Ka()}d.prototype.i=function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};d.prototype.ha=function(){this.scrollWidth=this.j.offsetWidth-this.S;this.scrollHeight=this.j.offsetHeight-this.G;this.m=Math.min(K(this.H,this.scrollWidth)+this.Za,this.Z.length);this.l=Math.min((this.scrollHeight/this.T|0)+this.$a,this.qa);this.D<=this.scrollWidth&&(this.g=!1);this.C<=this.scrollHeight&&(this.h=!1)};d.prototype.va=function(a,b){return[v(b/
this.T|0,0,this.qa-this.l),v(I(this.H,a),0,this.Ha-this.m)]};d.prototype.X=function(){var a;this.ka.La();null!=(a=this.ga)&&(a.w=null);this.o.X(this);this.j.innerHTML="";return this.f=this.b=this.a=null};d.prototype.Ka=function(){var a,b,c,d,e,f,g;this.X();this.ha();this.v={};this.rows={};this.cells={};this.j.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container fattable-column-header-container";this.b.style.width=this.scrollWidth+"px";this.b.style.height=
this.G+"px";this.b.style.left=this.S+"px";this.M=document.createElement("div");this.M.className="fattable-viewport";this.M.style.height=this.G+"px";this.b.appendChild(this.M);this.f=document.createElement("div");this.f.className+=" fattable-header-container fattable-row-header-container";this.f.style.height=this.scrollHeight+"px";this.f.style.width=this.S+"px";this.f.style.top=this.G+"px";this.fa=document.createElement("div");this.fa.className="fattable-viewport";this.f.appendChild(this.fa);this.a=
document.createElement("div");this.a.className="fattable-body-container";this.a.style.width=this.scrollWidth+"px";this.a.style.top=this.G+"px";this.a.style.left=this.S+"px";this.K=document.createElement("div");this.K.className="fattable-viewport";this.K.style.height=this.scrollHeight+"px";c=d=this.m;for(e=2*this.m;d<e;c=d+=1)a=document.createElement("div"),a.style.height=this.G+"px",a.c=!1,this.v[c]=a,this.M.appendChild(a);b=d=this.l;for(e=2*this.l;d<e;b=d+=1)a=document.createElement("div"),a.style.width=
this.S+"px",a.c=!1,this.rows[b]=a,this.fa.appendChild(a);c=d=this.m;for(f=2*this.m;d<f;c=d+=1)for(b=e=this.l,g=2*this.l;e<g;b=e+=1)a=document.createElement("div"),a.c=!1,a.style.height=this.T+"px",this.K.appendChild(a),this.cells[b+","+c]=a;this.u=this.l;this.A=this.m;this.display(0,0);this.j.appendChild(this.a);this.j.appendChild(this.b);this.j.appendChild(this.f);this.a.appendChild(this.K);this.ra();this.ga=new H(this.a,this.b,this.f,this.D,this.C,this.ka,this.g,this.h,this.ja);this.ga.w=function(a){return function(d,
f){var e,h,g;e=a.va(d,f);b=e[0];c=e[1];a.display(b,c);g=a.cells;for(h in g)e=g[h],e.style[z]="translate("+(e.left-d)+"px,"+(e.top-f)+"px)";g=a.v;for(h in g)e=g[h],e.style[z]="translate("+(e.left-d)+"px, 0px)";g=a.rows;for(h in g)e=g[h],e.style[z]="translate(0px, "+(e.top-f)+"px)";clearTimeout(a.Ja);a.Ja=setTimeout(a.ra.bind(a),200);return a.w(d,f)}}(this);this.ga.w(0,0)};d.prototype.ra=function(a){var b,c,d,e,f,g,k,l;null==a&&(a=!1);f=function(b){return function(c){if(a||c.c)return b.s.N(e,function(a){c.c=
!1;return b.o.ma(c,a)})}}(this);e=g=this.A;for(k=this.A+this.m;g<k;e=g+=1)for(c=this.v[e],f(c),d=c=this.u,l=this.u+this.l;c<l;d=c+=1)b=d+","+e,b=this.cells[b],(a||b.c)&&function(a){return function(b){return a.s.I(d,e,function(c){b.c=!1;return a.o.ca(b,c)})}}(this)(b);c=[];d=g=this.u;for(k=this.u+this.l;g<k;d=g+=1)f=this.rows[d],c.push(function(b){return function(c){if(a||c.c)return b.s.O(d,function(a){c.c=!1;return b.o.na(c,a)})}}(this)(f));return c};d.prototype.w=function(){};d.prototype.display=
function(a,b){this.b.style.display="none";this.f.style.display="none";this.a.style.display="none";this.Fa(b);this.Ga(a);this.b.style.display="";this.f.style.display="";return this.a.style.display=""};d.prototype.Fa=function(a){var b,c,d,e,f,g,k,l,n,m,q,r,p,t,L;n=this.u;q=a-this.A;if(0!==q){g=Math.min(Math.abs(q),this.m);for(b=p=0;p<g;b=p+=1)for(0<q?(m=this.A+b,f=a+b+this.m-g):(m=this.A+this.m-g+b,f=a+b),d=this.H[f],c=this.Z[f]+"px",e=this.v[m],delete this.v[m],this.s.oa(f)?this.s.N(f,function(a){return function(b){e.c=
!1;return a.o.ma(e,b)}}(this)):e.c||(e.c=!0,this.o.xa(e)),e.left=d,e.style.width=c,this.v[f]=e,r=function(a){return function(b){if(a.s.P(k,f))return a.s.I(k,f,function(c){b.c=!1;return a.o.ca(b,c)});if(!b.c)return b.c=!0,a.o.la(b)}}(this),k=t=n,L=n+this.l;t<L;k=t+=1)l=k+","+m,b=this.cells[l],delete this.cells[l],this.cells[k+","+f]=b,b.left=d,b.style.width=c,r(b);this.A=a}};d.prototype.Ga=function(a){var b,c,d,e,f,g,k,l,n,m,q,r,p,t;d=this.u;g=this.A;m=a-d;if(0!==m){d=Math.min(Math.abs(m),this.l);
for(b=r=0;r<d;b=r+=1)for(0<m?(k=this.u+b,c=a+b+this.l-d):(k=this.u+this.l-d+b,c=a+b),n=c*this.T,l=this.rows[k],delete this.rows[k],this.s.pa(c)?this.s.O(c,function(a){return function(b){l.c=!1;return a.o.na(l,b)}}(this)):l.c||(l.c=!0,this.o.ya(l)),l.top=n,this.rows[c]=l,q=function(a){return function(b){if(a.s.P(c,e))return a.s.I(c,e,function(c){b.c=!1;return a.o.ca(b,c)});if(!b.c)return b.c=!0,a.o.la(b)}}(this),e=p=g,t=g+this.m;p<t;e=p+=1)f=k+","+e,b=this.cells[f],delete this.cells[f],this.cells[c+
","+e]=b,b.top=n,q(b);this.u=a}};return d}();C=function(d){return new B(d)};u={Ta:y,Ua:B,Ra:A,Qa:u,Sa:x};for(E in u)x=u[E],C[E]=x;window.wa=C}).call(this);
