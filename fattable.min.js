(function(){function F(c,a){function b(){this.constructor=c}for(var e in a)M.call(a,e)&&(c[e]=a[e]);b.prototype=a.prototype;c.prototype=new b;c.ka=a.prototype}var G,y,u,z,H,w,x,A,I,v,J,B,C,D,E,K,M={}.hasOwnProperty;J=function(c){var a,b,e,f,d;a=[0];f=b=0;for(d=c.length;f<d;f++)e=c[f],b+=e,a.push(b);return a};v=function(c,a,b){return c<a?a:c>b?b:c};I=function(c,a){var b,e,f,d;if(c[0]>a)return 0;b=0;for(e=c.length;b+2<e;)if(f=(b+e)/2|0,d=c[f],d<a)b=f;else if(d>a)e=f;else return f;return b};K=function(c,
a){var b,e;b=1;for(e=0;e+b<c.length;)c[e+b]-c[e]>a?e+=1:b+=1;return b};E=function(){var c,a,b,e,f;c=document.createElement("div");f=["transform","WebkitTransform","MozTransform","OTransform","MsTransform"];b=0;for(e=f.length;b<e;b++)if(a=f[b],void 0!==c.style[a])return a}();y=function(){function c(a){this.size=null!=a?a:100;this.data={};this.K=[]}c.prototype.has=function(a){return this.data.hasOwnProperty(a)};c.prototype.get=function(a){return this.data[a]};c.prototype.set=function(a,b){var e;e=this.K.indexOf(a);
0<=e&&this.K.splice(e,1);this.K.push(a);this.K.length>=this.size&&(e=this.K.shift(),delete this.data[e]);return this.data[a]=b};return c}();C=function(c){return c.touches&&c.touches.length?c.touches:[{pageX:c.pageX,pageY:c.pageY}]};x=function(){function c(){}c.prototype.M=function(){return!1};c.prototype.ga=function(){return!1};c.prototype.G=function(a,b,e){null==e&&(e=function(){});return e("getCell not implemented")};c.prototype.H=function(a,b){null==b&&(b=function(){});return b("getHeader not implemented")};
return c}();w=function(c){function a(){return a.ka.constructor.apply(this,arguments)}F(a,c);a.prototype.pa=function(b,a){return b+","+a};a.prototype.qa=function(b){return"col "+b};a.prototype.M=function(){return!0};a.prototype.ga=function(){return!0};a.prototype.G=function(b,a,c){null==c&&(c=function(){});return c(this.pa(b,a))};a.prototype.H=function(b,a){null==a&&(a=function(){});return a(this.qa(b))};return a}(x);u=function(c){function a(a){null==a&&(a=100);this.$=new y(a);this.Z=new y(a);this.X=
{};this.I={}}F(a,c);a.prototype.H=function(a){if(this.Z.has(void 0))return cb(this.Z.get(void 0)(a));if(null!=this.I[void 0])return this.I[void 0].push([a,cb]);this.I[void 0]=[[a,cb]];return this.La(void 0,function(e){return function(c){var d,h,g,k;e.Z.set(void 0,c);k=e.I[void 0];h=0;for(g=k.length;h<g;h++)d=k[h],a=d[0],d=d[1],d(c(a));return delete e.I[void 0]}}(this))};a.prototype.M=function(){return this.$.has(void 0)};a.prototype.G=function(a,e,c){null==c&&(c=function(){});if(this.$.has(void 0))return c(this.$.get(void 0)(a,
e));if(null!=this.X[void 0])return this.X[void 0].push([a,e,c]);this.X[void 0]=[[a,e,c]]};a.prototype.H=function(a,e){null==e&&(e=function(){});return e("col "+a)};return a}(x);z=function(){function c(){}c.prototype.U=function(a){var b,e;e=a.cells;for(b in e);a=a.m;e=[];for(b in a)e.push(void 0);return e};c.prototype.fa=function(a,b){return a.textContent=b};c.prototype.Y=function(a,b){return a.textContent=b};c.prototype.oa=function(a){a.textContent="NA"};c.prototype.ea=function(a){return a.textContent=
"NA"};return c}();G=function(){function c(){this.T=[]}c.prototype.bind=function(a,b,e){this.T.push([a,b,e]);return a.addEventListener(b,e)};c.prototype.ya=function(){var a,b,e,c,d,h;h=this.T;c=0;for(d=h.length;c<d;c++)a=h[c],e=a[0],b=a[1],a=a[2],e.removeEventListener(b,a);this.T=[]};return c}();H=function(){function c(a,b,c,f,d,h,g){var k,m;this.a=a;this.b=b;this.B=c;this.A=f;this.visible=null!=h?h:!0;this.ca=null!=g?g:!0;this.g=document.createElement("div");this.g.className+=" fattable-v-scrollbar";
this.f=document.createElement("div");this.f.className+=" fattable-h-scrollbar";this.visible&&(this.a.appendChild(this.g),this.a.appendChild(this.f));a=document.createElement("div");a.style.height="1px";a.style.width=this.B+"px";b=document.createElement("div");b.style.width="1px";b.style.height=this.A+"px";this.f.appendChild(a);this.g.appendChild(b);this.ja=Math.max(this.f.offsetHeight,this.g.offsetWidth);this.g.style.bottom=this.ja+"px";this.f.style.right=this.ja+"px";this.scrollTop=this.scrollLeft=
0;this.f.onscroll=function(a){return function(){if(!a.w&&a.scrollLeft!==a.f.scrollLeft)return a.scrollLeft=a.f.scrollLeft,a.o(a.scrollLeft,a.scrollTop)}}(this);this.g.onscroll=function(a){return function(){if(!a.w&&a.scrollTop!==a.g.scrollTop)return a.scrollTop=a.g.scrollTop,a.o(a.scrollLeft,a.scrollTop)}}(this);this.ca&&(d.bind(this.a,"mousedown",function(a){return function(b){if(1===b.button)return a.w=!0,a.a.className="fattable-body-container fattable-moving",a.W=a.scrollLeft+b.clientX,a.na=a.scrollTop+
b.clientY}}(this)),d.bind(this.a,"mouseup",function(a){return function(){a.w=!1;return a.a.className="fattable-body-container"}}(this)),d.bind(this.a,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c,e;if(a.w)return c=-b.clientX+a.W,e=-b.clientY+a.na,a.L(c,e)},0)}}(this)),d.bind(this.a,"mouseout",function(a){return function(b){if(a.w&&(null==b.toElement||b.toElement.parentElement.parentElement!==a.a))return a.a.className="fattable-body-container",a.w=!1}}(this)),
d.bind(this.b,"mousedown",function(a){return function(b){if(1===b.button)return a.N=!0,a.b.className="fattable-header-container fattable-moving",a.W=a.scrollLeft+b.clientX}}(this)),d.bind(this.a,"mouseup",function(a){return function(b){var c;if(1===b.button)return a.N=!1,a.b.className="fattable-header-container",b.stopPropagation(),c=function(a){a.stopPropagation();return this.removeEventListener("click",c,!0)},a.a.addEventListener("click",c,!0)}}(this)),d.bind(this.b,"mousemove",function(a){return function(b){return window.setTimeout(function(){var c;
if(a.N)return c=-b.clientX+a.W,a.L(c)},0)}}(this)),d.bind(this.b,"mouseout",function(a){return function(b){if(a.N){if(null==b.toElement||b.toElement.parentElement.parentElement!==a.b)a.b.className="fattable-header-container";return a.N=!1}}}(this)));this.ra=this.B>this.f.clientWidth?this.B-this.f.clientWidth:0;this.sa=this.A>this.g.clientHeight?this.A-this.g.clientHeight:0;m="DOMMouseScroll";void 0!==this.a.onwheel?m="wheel":void 0!==this.a.onmousewheel&&(m="mousewheel");k=function(){switch(m){case "wheel":return function(a){var b,
c,e,d,f,k;switch(a.deltaMode){case a.za:b=null!=(e=-50*a.deltaX)?e:0;c=null!=(d=-50*a.deltaY)?d:0;break;case a.Aa:b=null!=(f=-1*a.deltaX)?f:0,c=null!=(k=-1*a.deltaY)?k:0}return[b,c]};case "mousewheel":return function(a){var b,c,e;b=null!=(c=a.wheelDeltaX)?c:0;a=null!=(e=a.wheelDeltaY)?e:a.wheelDelta;return[b,a]};case "DOMMouseScroll":return function(a){var b,c;c=b=0;a.axis===a.Ba?b=-50*a.detail:c=-50*a.detail;return[b,c]}}}();a=function(a){return function(b){var c;c=k(b);if(a.L(a.scrollLeft-c[0],
a.scrollTop-c[1]))return b.preventDefault()}}(this);b=function(a){return function(b){var c;c=k(b);if(a.L(a.scrollLeft-c[0],a.scrollTop))return b.preventDefault()}}(this);d.bind(this.a,m,a);d.bind(this.b,m,b);this.R=new Scroller(this.L.bind(this),{});this.R.Na(this.scrollWidth,this.scrollHeight,this.B,this.A);c=function(a){return function(b){a.S=!0;a.R.Ka(C(b),b.timeStamp);return b.preventDefault()}}(this);b=function(a){return function(b){a.R.Ja(C(b),b.timeStamp,b.scale);return a.S=!0}}(this);a=function(a){return function(b){if(a.S)return a.R.Ia(b.timeStamp),
a.S=!1}}(this);"ontouchstart"in window?(d.bind(this.a,"touchstart",c),d.bind(this.a,"touchmove",b),d.bind(this.a,"touchend",a),d.bind(this.a,"touchcancel",a)):window.navigator.ma?(d.bind(this.a,"pointerdown",c),d.bind(this.a,"pointermove",b),d.bind(this.a,"pointerup",a),d.bind(this.a,"pointercancel",a)):window.navigator.msPointerEnabled&&(d.bind(this.a,"MSPointerDown",c),d.bind(this.a,"MSPointerMove",b),d.bind(this.a,"MSPointerUp",a),d.bind(this.a,"MSPointerCancel",a))}c.prototype.o=function(){};
c.prototype.L=function(a,b){var c;c=!1;null!=a?(a=v(a,0,this.ra),this.scrollLeft!==a&&(c=!0,this.scrollLeft=a)):a=this.scrollLeft;null!=b?(b=v(b,0,this.sa),this.scrollTop!==b&&(c=!0,this.scrollTop=b)):b=this.scrollTop;this.f.scrollLeft=a;this.g.scrollTop=b;this.o(a,b);return c};return c}();A=function(){function c(a){var b;b=a.h;if(null==b)throw"container not specified.";if("string"===typeof b)this.h=document.querySelector(b);else if("object"===typeof b)this.h=b;else throw"Container must be a string or a dom element.";
this.j(a,"painter",new z);this.j(a,"autoSetup",!0);this.j(a,"model");this.j(a,"nbRows");this.j(a,"rowHeight");this.j(a,"columnWidths");this.j(a,"rowHeight");this.j(a,"headerHeight");this.j(a,"scrollBarVisible",!0);this.j(a,"enableDragMove",!0);this.va=this.V.length;-1===(" "+this.h.className+" ").search(/\sfattable\s/)&&(this.h.className+=" fattable");this.A=this.P*this.ha;this.D=J(this.V);this.B=this.D[this.D.length-1];this.m={};this.cells={};this.da=new G;this.ba();this.Ha&&this.xa()}c.prototype.j=
function(a,b,c){if(null==a[b]){if(void 0===c)throw"Expected parameter <"+b+">";this[b]=c}else this[b]=a[b]};c.prototype.ba=function(){this.scrollWidth=this.h.offsetWidth;this.scrollHeight=this.h.offsetHeight-this.O;this.i=Math.min(K(this.D,this.scrollWidth)+2,this.V.length);this.l=Math.min((this.scrollHeight/this.P|0)+2,this.ha)};c.prototype.la=function(a,b){return[v(b/this.P|0,0,this.ha-this.l),v(I(this.D,a),0,this.va-this.i)]};c.prototype.U=function(){var a;this.da.ya();null!=(a=this.aa)&&(a.o=
null);this.s.U(this);this.h.innerHTML="";return this.b=this.a=null};c.prototype.xa=function(){var a,b,c,f,d,h,g;this.U();this.ba();this.m={};this.cells={};this.h.innerHTML="";this.b=document.createElement("div");this.b.className+=" fattable-header-container";this.b.style.height=this.O+"px";this.J=document.createElement("div");this.J.className="fattable-viewport";this.J.style.width=this.scrollWidth+"px";this.J.style.height=this.O+"px";this.b.appendChild(this.J);this.a=document.createElement("div");
this.a.className="fattable-body-container";this.a.style.top=this.O+"px";this.C=document.createElement("div");this.C.className="fattable-viewport";this.C.style.width=this.scrollWidth+"px";this.C.style.height=this.scrollHeight+"px";f=a=this.i;for(h=2*this.i;a<h;f=a+=1)for(c=d=this.l,g=2*this.l;d<g;c=d+=1)b=document.createElement("div"),b.c=!1,b.style.height=this.P+"px",this.C.appendChild(b),this.cells[c+","+f]=b;a=d=this.i;for(h=2*this.i;d<h;a=d+=1)b=document.createElement("div"),b.style.height=this.O+
"px",b.c=!1,this.m[a]=b,this.J.appendChild(b);this.F=this.l;this.u=this.i;this.display(0,0);this.h.appendChild(this.a);this.h.appendChild(this.b);this.a.appendChild(this.C);this.ia();this.aa=new H(this.a,this.b,this.B,this.A,this.da,this.Ma,this.ca);this.aa.o=function(a){return function(b,d){var l,h,g;l=a.la(b,d);c=l[0];f=l[1];a.display(c,f);g=a.m;for(h in g)l=g[h],l.style[E]="translate("+(l.left-b)+"px, 0px)";g=a.cells;for(h in g)l=g[h],l.style[E]="translate("+(l.left-b)+"px,"+(l.top-d)+"px)";clearTimeout(a.wa);
a.wa=setTimeout(a.ia.bind(a),200);return a.o(b,d)}}(this);this.aa.o(0,0)};c.prototype.ia=function(a){var b,c,f,d,h,g,k,m,n;null==a&&(a=!1);g=function(b){return function(c){if(a||c.c)return b.v.H(d,function(a){c.c=!1;return b.s.fa(c,a)})}}(this);n=[];d=k=this.u;for(m=this.u+this.i;k<m;d=k+=1)c=this.m[d],g(c),n.push(function(){var c,e,g;g=[];f=c=this.F;for(e=this.F+this.l;c<e;f=c+=1)h=f+","+d,b=this.cells[h],a||b.c?g.push(function(a){return function(b){return a.v.G(f,d,function(c){b.c=!1;return a.s.Y(b,
c)})}}(this)(b)):g.push(void 0);return g}.call(this));return n};c.prototype.o=function(){};c.prototype.display=function(a,b){this.b.style.display="none";this.a.style.display="none";this.ta(b);this.ua(a);this.b.style.display="";return this.a.style.display=""};c.prototype.ta=function(a){var b,c,f,d,h,g,k,m,n,l,q,r,p,t,L;n=this.F;q=a-this.u;if(0!==q){h=Math.min(Math.abs(q),this.i);for(b=p=0;p<h;b=p+=1)for(0<q?(l=this.u+b,d=a+b+this.i-h):(l=this.u+this.i-h+b,d=a+b),f=this.D[d],c=this.V[d]+"px",g=this.m[l],
delete this.m[l],this.v.ga(d)?this.v.H(d,function(a){return function(b){g.c=!1;return a.s.fa(g,b)}}(this)):g.c||(g.c=!0,this.s.oa(g)),g.left=f,g.style.width=c,this.m[d]=g,r=function(a){return function(b){if(a.v.M(k,d))return a.v.G(k,d,function(c){b.c=!1;return a.s.Y(b,c)});if(!b.c)return b.c=!0,a.s.ea(b)}}(this),k=t=n,L=n+this.l;t<L;k=t+=1)m=k+","+l,b=this.cells[m],delete this.cells[m],this.cells[k+","+d]=b,b.left=f,b.style.width=c,r(b);this.u=a}};c.prototype.ua=function(a){var b,c,f,d,h,g,k,m,n,
l,q,r,p,t;g=this.F;k=this.u;l=a-g;if(0!==l){f=Math.min(Math.abs(l),this.l);for(b=r=0;r<f;b=r+=1)for(0<l?(m=g+b,c=a+b+this.l-f):(m=g+this.l-f+b,c=a+b),n=c*this.P,q=function(a){return function(b){if(a.v.M(c,d))return a.v.G(c,d,function(c){b.c=!1;return a.s.Y(b,c)});if(!b.c)return b.c=!0,a.s.ea(b)}}(this),d=p=k,t=k+this.i;p<t;d=p+=1)h=m+","+d,b=this.cells[h],delete this.cells[h],this.cells[c+","+d]=b,b.top=n,q(b);this.F=a}};return c}();B=function(c){return new A(c)};u={Fa:x,Ga:A,Da:z,Ca:u,Ea:w};for(D in u)w=
u[D],B[D]=w;window.ma=B}).call(this);
